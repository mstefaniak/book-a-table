(this["webpackJsonpbook-a-table"]=this["webpackJsonpbook-a-table"]||[]).push([[0],{173:function(e,t,a){},192:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(56),i=a.n(o),c=(a(173),a(7)),s=a(265),b=a(22),u=a(66),l=a.n(u),j=a(87),d=a(12),m=a(76),p=a(135),h=a(134),O=a(133),x=a(236),f=a(139),g=a(69),_=a(264),w=a(59),k=a(262),y=a(255),v=a(267),z=a(268),C=a(269),N=a(253),S=a(259),T=a(243),B=a(261),I=a(270),W=a(254),A=a(271),D=a(147),q=a(146),E=a(252),M=a(196),J=a(258),V=a(256),Z=Object(r.createContext)({firebase:null}),F=a(237),L=a(50),P=a(75),R=function(e){return e.docs.map((function(e){return Object(b.a)(Object(b.a)({},e.data()),{},{id:e.id})}))},U=function(e,t){var a=Object(O.a)(t),r=Object(x.a)(t);return Object(F.a)(Object(h.a)(Object(p.a)(e,a),r))},G=a(1),K=Object(m.a)(new Date,1),H={date:K,time:Object(p.a)(Object(h.a)(K,0),18),area:"anywhere"},Q=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduce((function(t,a){return t||a(e)}),void 0)}},X=function(){var e=Object(_.a)(),t=e.t,a="pl"===e.i18n.language?q.a:D.a,n=Object(r.useContext)(Z).firebase,o=function(){var e=Object(r.useContext)(Z).firebase,t=Object(r.useCallback)(function(){var t=Object(j.a)(l.a.mark((function t(a){var r,n,o,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",0);case 2:return r=e.firestore().collection("bookings"),t.next=5,r.where("date",">",Object(F.a)(Object(L.a)(a))).where("date","<",Object(F.a)(Object(P.a)(a))).get();case 5:if(!(n=t.sent).empty){t.next=9;break}return console.warn("No matching documents"),t.abrupt("return",0);case 9:return o=R(n),i=o.reduce((function(e,t){return e+Number(t.people)}),0),t.abrupt("return",i);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(r.useMemo)((function(){return{getCount:t}}),[t])}(),i=o.getCount,c=Object(r.useState)(!1),s=Object(d.a)(c,2),u=s[0],m=s[1],X=Object(r.useState)(),Y=Object(d.a)(X,2),$=Y[0],ee=Y[1],te=function(e){return e?void 0:t("required")},ae=function(e){return isNaN(Number(e))?t("invalid_number"):void 0},re=function(e){var t=Object(O.a)(e),a=Object(x.a)(e);if(t<16||t>20||20===t&&a>0)return"error"},ne=function(e){var t=Object(p.a)(Object(h.a)(e,0),16),a=Object(p.a)(Object(h.a)(Object(f.a)(K,0),59),15);if(Object(g.a)(t,a))return"error"},oe=function(){var e=Object(j.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return a=U(t.date,t.time),e.next=5,i(a);case 5:if(!(e.sent>=20)){e.next=8;break}return e.abrupt("return",ee("too_many_bookings"));case 8:return r={name:t.name,area:t.area,people:t.people,comment:t.comment||"",date:a,status:0},e.next=11,n.firestore().collection("bookings").add(r);case 11:e.sent?m(!0):ee("generic_error");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return $?Object(G.jsxs)(k.a,{container:!0,spacing:2,children:[Object(G.jsx)(k.a,{item:!0,xs:12,children:Object(G.jsx)(y.a,{severity:"error",children:t($)})}),Object(G.jsx)(k.a,{item:!0,xs:12,children:Object(G.jsx)(v.a,{type:"button",variant:"contained",onClick:function(){ee(void 0)},children:t("try_again")})})]}):u?Object(G.jsxs)(k.a,{container:!0,spacing:2,children:[Object(G.jsx)(k.a,{item:!0,xs:12,children:Object(G.jsx)(y.a,{severity:"success",children:t("success_message")})}),Object(G.jsx)(k.a,{item:!0,xs:12,children:Object(G.jsx)(v.a,{type:"button",variant:"contained",onClick:function(){m(!1)},children:t("add_new_booking")})})]}):Object(G.jsx)(w.b,{onSubmit:oe,initialValues:H,render:function(e){var r,n,o=e.handleSubmit,i=e.submitting,c=e.pristine;return Object(G.jsxs)("form",{onSubmit:o,children:[Object(G.jsxs)(k.a,{container:!0,spacing:2,children:[Object(G.jsxs)(k.a,{item:!0,xs:12,justifyContent:"center",children:[Object(G.jsx)(z.a,{variant:"h4",gutterBottom:!0,sx:{textTransform:"uppercase",textAlign:"center"},children:t("book_a_table")}),Object(G.jsx)(C.a,{m:4,sx:{textAlign:"center"},children:Object(G.jsx)("img",{src:"/book-a-table/apple-touch-icon.png"})})]}),Object(G.jsx)(k.a,{item:!0,xs:12,children:Object(G.jsx)(w.a,{name:"name",validate:te,children:function(e){var a=e.input,r=e.meta;return Object(G.jsx)(N.a,Object(b.a)(Object(b.a)({},a),{},{fullWidth:!0,label:r.touched&&r.error?t("error"):t("name"),error:r.touched&&!!r.error,helperText:r.touched&&r.error?r.error:t("name_hint")}))}})}),Object(G.jsxs)(M.b,{dateAdapter:E.a,locale:a,children:[Object(G.jsx)(k.a,{item:!0,xs:12,children:Object(G.jsx)(w.a,{name:"date",validate:ne,children:function(e){var a=e.input,r=e.meta;return Object(G.jsx)(J.a,Object(b.a)(Object(b.a)({},a),{},{label:r.touched&&r.error?t("error"):t("date"),renderInput:function(e){return Object(G.jsx)(N.a,Object(b.a)(Object(b.a)({},e),{},{fullWidth:!0,error:r.touched&&!!r.error,helperText:t("date_hint")}))}}))}})}),Object(G.jsx)(k.a,{item:!0,xs:12,children:Object(G.jsx)(w.a,{name:"time",validate:re,children:function(e){var a=e.input,r=e.meta;return Object(G.jsx)(V.a,Object(b.a)(Object(b.a)({},a),{},{ampm:!1,minutesStep:15,label:r.touched&&r.error?t("error"):t("time"),renderInput:function(e){return Object(G.jsx)(N.a,Object(b.a)(Object(b.a)({},e),{},{fullWidth:!0,error:r.touched&&!!r.error,helperText:t("time_hint")}))}}))}})})]}),Object(G.jsx)(k.a,{item:!0,xs:12,children:Object(G.jsx)(w.a,{name:"people",validate:Q(ae,(r=1,n=12,function(e){return Number(e)<r||Number(e)>n?t("not_between",{min:1,max:12}):void 0})),children:function(e){var a=e.input,r=e.meta;return Object(G.jsx)(N.a,Object(b.a)(Object(b.a)({},a),{},{fullWidth:!0,label:r.touched&&r.error?t("error"):t("people_hint"),error:r.touched&&!!r.error,helperText:r.touched&&r.error?r.error:null}))}})}),Object(G.jsx)(k.a,{item:!0,xs:12,children:Object(G.jsx)(w.a,{name:"area",type:"radio",children:function(e){var a=e.input;return Object(G.jsxs)(S.a,{component:"fieldset",children:[Object(G.jsx)(T.a,{component:"legend",children:t("place")}),Object(G.jsxs)(B.a,Object(b.a)(Object(b.a)({},a),{},{defaultValue:H.area,children:[Object(G.jsx)(I.a,{value:"anywhere",control:Object(G.jsx)(W.a,{}),label:t("place_anywhere")}),Object(G.jsx)(I.a,{value:"upstairs",control:Object(G.jsx)(W.a,{}),label:t("place_upstairs")}),Object(G.jsx)(I.a,{value:"downstairs",control:Object(G.jsx)(W.a,{}),label:t("place_downstairs")})]}))]})}})}),Object(G.jsx)(k.a,{item:!0,xs:12,children:Object(G.jsx)(w.a,{name:"comment",children:function(e){var a=e.input;return Object(G.jsx)(N.a,Object(b.a)(Object(b.a)({},a),{},{fullWidth:!0,label:t("other"),helperText:t("other_hint")}))}})}),Object(G.jsx)(k.a,{item:!0,xs:12,children:Object(G.jsx)(v.a,{type:"submit",variant:"contained",color:"primary",sx:{padding:2,margin:"0 auto",display:"block",width:200},disabled:i||c,children:t("book")})})]}),Object(G.jsxs)(y.a,{sx:{marginTop:3},severity:"info",children:[t("beta_info"),Object(G.jsx)(A.a,{href:"mailto:theofficeszczecin@gmail.com?subject=Book a table - error",children:t("beta_link")})]})]})}})},Y=a(122),$=a(78),ee=a(143),te={en:{translation:{add_new_booking:"Book another table",beta_info:"This is BETA version of our booking app. If you are experiencing any problems, please ",beta_link:"let us know",book:"Book",book_a_table:"Book a table",date:"Date",date_hint:"Not allowed to book earlier then tomorrow",error:"Error",generic_error:"Crap! Something get wrong :(",invalid_number:"Not a number",name:"First Name",name_hint:"First name or nickname",not_between:"Should be between {{min}} and {{max}}",other:"Other requirements",other_hint:"Let us know what else we can do for you",people_hint:"How many people?",place:"Place",place_anywhere:"Anywhere",place_upstairs:"Upstairs (street level)",place_downstairs:"Downstairs (basement)",required:"Required",success_message:"Booking successful. We cannot wait to see you.",time:"Time",time_hint:"In the range from 16:00 till 20:00",too_many_bookings:"Too many bookings for chosen day :(",try_again:"Try again"}},pl:{translation:{add_new_booking:"Zarezerwuj kolejny stolik",beta_info:"To jest wersja BETA systemu do rezerwacji miejsc. Je\u015bli napotykasz jakie\u015b problemy, ",beta_link:"zg\u0142o\u015b je nam",book:"Zarezerwuj",book_a_table:"Rezerwacje",date:"Data",date_hint:"Mo\u017cemy zarezerwowa\u0107 najwcze\u015bniej na jutro",error:"B\u0142\u0105d",genering_error:"Motyla noga! Co\u015b posz\u0142o nie tak :(",invalid_number:"Nieprawid\u0142owy numer",name:"Imi\u0119",name_hint:"Imi\u0119 lub pseudonim",not_between:"Dopuszczamy od {{min}} do {{max}}",other:"Inne wymagania",other_hint:"Napisz co jeszcze mo\u017cemy dla ciebie zrobi\u0107",people_hint:"Dla ilu os\xf3b?",place:"Miejsce",place_anywhere:"Dowolne",place_upstairs:"U g\xf3ry (poziom ulicy)",place_downstairs:"Na dole (piwnica)",required:"Wymagane",success_message:"Stolik zarezerwowany. Do zobaczenia!",time:"Godzina",time_hint:"W zakresie od 16:00 do 20:00",too_many_bookings:"Brak odpowiedniej ilo\u015bci miejsc na wybrany dzie\u0144 :(",try_again:"Spr\xf3buj ponownie"}}};Y.a.use(ee.a).use($.e).init({resources:te,fallbackLng:"en",keySeparator:!1,interpolation:{escapeValue:!1}});Y.a;var ae=Object(c.a)("div")((function(e){return{position:"absolute",flexGrow:1,padding:40,backgroundColor:e.theme.palette.grey[100],top:0,bottom:0,right:0,left:0}})),re=Object(c.a)("div")({margin:"auto",maxWidth:500}),ne=function(){return Object(G.jsx)(ae,{children:Object(G.jsx)(re,{children:Object(G.jsx)(s.a,{sx:{p:4},children:Object(G.jsx)(X,{})})})})},oe=a(144),ie=a.n(oe),ce=(a(186),a(190),"book-a-table-prod"),se={apiKey:"AIzaSyCE6mjxw8cnpm0Z5qW1PesKNCFZxJV0bkw",authDomain:"".concat(ce,".firebaseapp.com"),databaseURL:"https://".concat(ce,".firebaseio.com"),projectId:ce,storageBucket:"".concat(ce,".appspot.com"),messagingSenderId:"173934858452",appId:"1:173934858452:web:50fdcc7645b3d229572b41"},be=ie.a.initializeApp(se);i.a.render(Object(G.jsx)(n.a.StrictMode,{children:Object(G.jsx)(Z.Provider,{value:{firebase:be},children:Object(G.jsx)(ne,{})})}),document.getElementById("root"))}},[[192,1,2]]]);
//# sourceMappingURL=main.7659d597.chunk.js.map