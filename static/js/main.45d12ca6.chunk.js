(this["webpackJsonpbook-a-table"]=this["webpackJsonpbook-a-table"]||[]).push([[0],{162:function(e,t,a){},181:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(52),c=a.n(o),i=(a(162),a(7)),s=a(254),b=a(22),u=a(62),j=a.n(u),l=a(83),d=a(12),m=a(72),p=a(126),h=a(125),O=a(124),x=a(225),f=a(130),_=a(65),w=a(253),g=a(55),k=a(251),y=a(244),v=a(256),z=a(257),C=a(258),N=a(242),S=a(248),T=a(232),B=a(250),I=a(259),D=a(243),A=a(260),q=a(241),E=a(185),M=a(247),W=a(245),Z=Object(r.createContext)({firebase:null}),J=a(226),V=a(46),F=a(71),L=function(e){return e.docs.map((function(e){return Object(b.a)(Object(b.a)({},e.data()),{},{id:e.id})}))},P=function(e,t){var a=Object(O.a)(t),r=Object(x.a)(t);return Object(J.a)(Object(h.a)(Object(p.a)(e,a),r))},U=a(1),G=Object(m.a)(new Date,1),K={date:G,time:Object(p.a)(Object(h.a)(G,0),18),area:"anywhere"},R=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduce((function(t,a){return t||a(e)}),void 0)}},H=function(){var e=Object(w.a)().t,t=Object(r.useContext)(Z).firebase,a=function(){var e=Object(r.useContext)(Z).firebase,t=Object(r.useCallback)(function(){var t=Object(l.a)(j.a.mark((function t(a){var r,n,o,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",0);case 2:return r=e.firestore().collection("bookings"),t.next=5,r.where("date",">",Object(J.a)(Object(V.a)(a))).where("date","<",Object(J.a)(Object(F.a)(a))).get();case 5:if(!(n=t.sent).empty){t.next=9;break}return console.warn("No matching documents"),t.abrupt("return",0);case 9:return o=L(n),c=o.reduce((function(e,t){return e+Number(t.people)}),0),t.abrupt("return",c);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(r.useMemo)((function(){return{getCount:t}}),[t])}(),n=a.getCount,o=Object(r.useState)(!1),c=Object(d.a)(o,2),i=c[0],s=c[1],u=Object(r.useState)(),m=Object(d.a)(u,2),H=m[0],Q=m[1],X=function(t){return t?void 0:e("required")},Y=function(t){return isNaN(Number(t))?e("invalid_number"):void 0},$=function(e){var t=Object(O.a)(e),a=Object(x.a)(e);if(t<16||t>20||20===t&&a>0)return"error"},ee=function(e){var t=Object(p.a)(Object(h.a)(e,0),16),a=Object(p.a)(Object(h.a)(Object(f.a)(G,0),59),15);if(Object(_.a)(t,a))return"error"},te=function(){var e=Object(l.a)(j.a.mark((function e(a){var r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return r=P(a.date,a.time),e.next=5,n(r);case 5:if(!(e.sent>=20)){e.next=8;break}return e.abrupt("return",Q("too_many_bookings"));case 8:return o={name:a.name,area:a.area,people:a.people,comment:a.comment||"",date:r,status:0},e.next=11,t.firestore().collection("bookings").add(o);case 11:e.sent?s(!0):Q("generic_error");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return H?Object(U.jsxs)(k.a,{container:!0,spacing:2,children:[Object(U.jsx)(k.a,{item:!0,xs:12,children:Object(U.jsx)(y.a,{severity:"error",children:e(H)})}),Object(U.jsx)(k.a,{item:!0,xs:12,children:Object(U.jsx)(v.a,{type:"button",variant:"contained",onClick:function(){Q(void 0)},children:e("try_again")})})]}):i?Object(U.jsxs)(k.a,{container:!0,spacing:2,children:[Object(U.jsx)(k.a,{item:!0,xs:12,children:Object(U.jsx)(y.a,{severity:"success",children:e("success_message")})}),Object(U.jsx)(k.a,{item:!0,xs:12,children:Object(U.jsx)(v.a,{type:"button",variant:"contained",onClick:function(){s(!1)},children:e("add_new_booking")})})]}):Object(U.jsx)(g.b,{onSubmit:te,initialValues:K,render:function(t){var a,r,n=t.handleSubmit,o=t.submitting,c=t.pristine;return Object(U.jsxs)("form",{onSubmit:n,children:[Object(U.jsxs)(k.a,{container:!0,spacing:2,children:[Object(U.jsxs)(k.a,{item:!0,xs:12,justifyContent:"center",children:[Object(U.jsx)(z.a,{variant:"h4",gutterBottom:!0,sx:{textTransform:"uppercase"},children:e("book_a_table")}),Object(U.jsx)(C.a,{children:Object(U.jsx)("img",{src:"/book-a-table/apple-touch-icon.png"})})]}),Object(U.jsx)(k.a,{item:!0,xs:12,children:Object(U.jsx)(g.a,{name:"name",validate:X,children:function(t){var a=t.input,r=t.meta;return Object(U.jsx)(N.a,Object(b.a)(Object(b.a)({},a),{},{label:r.touched&&r.error?e("error"):e("name"),error:r.touched&&!!r.error,helperText:r.touched&&r.error?r.error:e("name_hint")}))}})}),Object(U.jsxs)(E.b,{dateAdapter:q.a,children:[Object(U.jsx)(k.a,{item:!0,xs:12,children:Object(U.jsx)(g.a,{name:"date",validate:ee,children:function(t){var a=t.input,r=t.meta;return Object(U.jsx)(M.a,Object(b.a)(Object(b.a)({},a),{},{label:r.touched&&r.error?e("error"):e("date"),renderInput:function(t){return Object(U.jsx)(N.a,Object(b.a)(Object(b.a)({},t),{},{error:r.touched&&!!r.error,helperText:e("date_hint")}))}}))}})}),Object(U.jsx)(k.a,{item:!0,xs:12,children:Object(U.jsx)(g.a,{name:"time",validate:$,children:function(t){var a=t.input,r=t.meta;return Object(U.jsx)(W.a,Object(b.a)(Object(b.a)({},a),{},{ampm:!1,minutesStep:15,label:r.touched&&r.error?e("error"):e("time"),renderInput:function(t){return Object(U.jsx)(N.a,Object(b.a)(Object(b.a)({},t),{},{error:r.touched&&!!r.error,helperText:e("time_hint")}))}}))}})})]}),Object(U.jsx)(k.a,{item:!0,xs:12,children:Object(U.jsx)(g.a,{name:"people",validate:R(Y,(a=1,r=12,function(t){return Number(t)<a||Number(t)>r?e("not_between",{min:1,max:12}):void 0})),children:function(t){var a=t.input,r=t.meta;return Object(U.jsx)(N.a,Object(b.a)(Object(b.a)({},a),{},{label:r.touched&&r.error?e("error"):e("people_hint"),error:r.touched&&!!r.error,helperText:r.touched&&r.error?r.error:null}))}})}),Object(U.jsx)(k.a,{item:!0,xs:12,children:Object(U.jsx)(g.a,{name:"area",type:"radio",children:function(t){var a=t.input;return Object(U.jsxs)(S.a,{component:"fieldset",children:[Object(U.jsx)(T.a,{component:"legend",children:e("place")}),Object(U.jsxs)(B.a,Object(b.a)(Object(b.a)({},a),{},{defaultValue:K.area,children:[Object(U.jsx)(I.a,{value:"anywhere",control:Object(U.jsx)(D.a,{}),label:e("place_anywhere")}),Object(U.jsx)(I.a,{value:"upstairs",control:Object(U.jsx)(D.a,{}),label:e("place_upstairs")}),Object(U.jsx)(I.a,{value:"downstairs",control:Object(U.jsx)(D.a,{}),label:e("place_downstairs")})]}))]})}})}),Object(U.jsx)(k.a,{item:!0,xs:12,children:Object(U.jsx)(g.a,{name:"comment",children:function(t){var a=t.input;return Object(U.jsx)(N.a,Object(b.a)(Object(b.a)({},a),{},{label:e("other"),helperText:e("other_hint")}))}})}),Object(U.jsx)(k.a,{item:!0,xs:12,children:Object(U.jsx)(v.a,{type:"submit",variant:"contained",color:"primary",disabled:o||c,children:e("book")})})]}),Object(U.jsxs)(y.a,{sx:{marginTop:3},severity:"info",children:[e("beta_info"),Object(U.jsx)(A.a,{href:"mailto:theofficeszczecin@gmail.com?subject='Book a table - error'",children:e("beta_link")})]})]})}})},Q=a(113),X=a(74),Y=a(134),$={en:{translation:{add_new_booking:"Book another table",beta_info:"This is BETA version of our booking app. If you are experiencing any problems, please ",beta_link:"let us know",book:"Book",book_a_table:"Book a table",date:"Date",date_hint:"Not allowed to book earlier then tomorrow",error:"Error",generic_error:"Crap! Something get wrong :(",invalid_number:"Not a number",name:"First Name",name_hint:"First name or nickname",not_between:"Should be between {{min}} and {{max}}",other:"Other requirements",other_hint:"Let us know what else we can do for you",people_hint:"How many people?",place:"Place",place_anywhere:"Anywhere",place_upstairs:"Upstairs (street level)",place_downstairs:"Downstairs (basement)",required:"Required",success_message:"Booking successful. We cannot wait to see you.",time:"Time",time_hint:"In the range from 16:00 till 20:00",too_many_bookings:"Too many bookings for chosen day :(",try_again:"Try again"}},pl:{translation:{add_new_booking:"Zarezerwuj kolejny stolik",beta_info:"To jest wersja BETA systemu do rezerwacji miejsc. Je\u015bli napotykasz jakie\u015b problemy, ",beta_link:"zg\u0142o\u015b je nam",book:"Zarezerwuj",book_a_table:"Zarezerwuj stolik",date:"Data",date_hint:"Mo\u017cemy zarezerwowa\u0107 najwcze\u015bniej na jutro",error:"B\u0142\u0105d",genering_error:"Motyla noga! Co\u015b posz\u0142o nie tak :(",invalid_number:"Nieprawid\u0142owy numer",name:"Imi\u0119",name_hint:"Imi\u0119 lub pseudonim",not_between:"Dopuszczamy od {{min}} do {{max}}",other:"Inne wymagania",other_hint:"Napisz co jeszcze mo\u017cemy dla ciebie zrobi\u0107",people_hint:"Dla ilu os\xf3b?",place:"Miejsce",place_anywhere:"Dowolne",place_upstairs:"U g\xf3ry (poziom ulicy)",place_downstairs:"Na dole (piwnica)",required:"Wymagane",success_message:"Stolik zarezerwowany. Do zobaczenia!",time:"Godzina",time_hint:"W zakresie od 16:00 do 20:00",too_many_bookings:"Brak odpowiedniej ilo\u015bci miejsc na wybrany dzie\u0144 :(",try_again:"Spr\xf3buj ponownie"}}};Q.a.use(Y.a).use(X.e).init({resources:$,fallbackLng:"en",keySeparator:!1,interpolation:{escapeValue:!1}});Q.a;var ee=Object(i.a)("div")((function(e){return{position:"absolute",flexGrow:1,padding:40,backgroundColor:e.theme.palette.grey[100],top:0,bottom:0,right:0,left:0}})),te=Object(i.a)("div")({margin:"auto",maxWidth:500}),ae=function(){return Object(U.jsx)(ee,{children:Object(U.jsx)(te,{children:Object(U.jsx)(s.a,{sx:{p:4},children:Object(U.jsx)(H,{})})})})},re=a(135),ne=a.n(re),oe=(a(175),a(179),"book-a-table-prod"),ce={apiKey:"AIzaSyCE6mjxw8cnpm0Z5qW1PesKNCFZxJV0bkw",authDomain:"".concat(oe,".firebaseapp.com"),databaseURL:"https://".concat(oe,".firebaseio.com"),projectId:oe,storageBucket:"".concat(oe,".appspot.com"),messagingSenderId:"173934858452",appId:"1:173934858452:web:50fdcc7645b3d229572b41"},ie=ne.a.initializeApp(ce);c.a.render(Object(U.jsx)(n.a.StrictMode,{children:Object(U.jsx)(Z.Provider,{value:{firebase:ie},children:Object(U.jsx)(ae,{})})}),document.getElementById("root"))}},[[181,1,2]]]);
//# sourceMappingURL=main.45d12ca6.chunk.js.map