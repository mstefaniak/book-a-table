(this["webpackJsonpbook-a-table"]=this["webpackJsonpbook-a-table"]||[]).push([[0],{158:function(e,t,a){},177:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(49),i=a.n(o),c=(a(158),a(7)),s=a(251),b=a(22),u=a(59),j=a.n(u),l=a(80),d=a(12),m=a(69),p=a(122),O=a(121),h=a(120),x=a(221),_=a(126),f=a(62),g=a(250),k=a(52),w=a(247),v=a(240),y=a(253),S=a(254),T=a(255),z=a(238),E=a(244),C=a(228),D=a(246),A=a(256),I=a(239),N=a(257),B=a(237),R=a(181),P=a(243),W=a(241),F=Object(r.createContext)({firebase:null}),K=a(222),H=a(43),L=a(68),U=function(e){return e.docs.map((function(e){return Object(b.a)(Object(b.a)({},e.data()),{},{id:e.id})}))},q=function(e,t){var a=Object(h.a)(t),r=Object(x.a)(t);return Object(K.a)(Object(O.a)(Object(p.a)(e,a),r))},M=a(1),V=Object(m.a)(new Date,1),J={date:V,time:Object(p.a)(Object(O.a)(V,0),18),area:"anywhere"},Z=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduce((function(t,a){return t||a(e)}),void 0)}},G=function(){var e=Object(g.a)().t,t=Object(r.useContext)(F).firebase,a=function(){var e=Object(r.useContext)(F).firebase,t=Object(r.useCallback)(function(){var t=Object(l.a)(j.a.mark((function t(a){var r,n,o,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",0);case 2:return r=e.firestore().collection("bookings"),t.next=5,r.where("date",">",Object(K.a)(Object(H.a)(a))).where("date","<",Object(K.a)(Object(L.a)(a))).get();case 5:if(!(n=t.sent).empty){t.next=9;break}return console.warn("No matching documents"),t.abrupt("return",0);case 9:return o=U(n),i=o.reduce((function(e,t){return e+Number(t.people)}),0),t.abrupt("return",i);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(r.useMemo)((function(){return{getCount:t}}),[t])}().getCount,n=Object(r.useState)(!1),o=Object(d.a)(n,2),i=o[0],c=o[1],s=Object(r.useState)(),u=Object(d.a)(s,2),m=u[0],G=u[1],Y=function(t){return t?void 0:e("required")},Q=function(t){return isNaN(Number(t))?e("invalid_number"):void 0},X=function(e){var t=Object(h.a)(e),a=Object(x.a)(e);if(t<16||t>20||20===t&&a>0)return"error"},$=function(e){var t=Object(p.a)(Object(O.a)(e,0),16),a=Object(p.a)(Object(O.a)(Object(_.a)(V,0),59),15);if(Object(f.a)(t,a))return"error"},ee=function(){var e=Object(l.a)(j.a.mark((function e(r){var n,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=q(r.date,r.time),e.next=5,a(n);case 5:if(!(e.sent>=20)){e.next=8;break}return e.abrupt("return",G("too_many_bookings"));case 8:return o={name:r.name,area:r.area,people:r.people,comment:r.comment||"",date:n,status:0},e.next=11,t.firestore().collection("bookings").add(o);case 11:e.sent?c(!0):G("generic_error");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return m?Object(M.jsxs)(w.a,{container:!0,spacing:2,children:[Object(M.jsx)(w.a,{item:!0,xs:12,children:Object(M.jsx)(v.a,{severity:"error",children:e(m)})}),Object(M.jsx)(w.a,{item:!0,xs:12,children:Object(M.jsx)(y.a,{type:"button",variant:"contained",onClick:function(){G(void 0)},children:e("try_again")})})]}):i?Object(M.jsxs)(w.a,{container:!0,spacing:2,children:[Object(M.jsx)(w.a,{item:!0,xs:12,children:Object(M.jsx)(v.a,{severity:"success",children:e("success_message")})}),Object(M.jsx)(w.a,{item:!0,xs:12,children:Object(M.jsx)(y.a,{type:"button",variant:"contained",onClick:function(){c(!1)},children:e("add_new_booking")})})]}):Object(M.jsx)(k.b,{onSubmit:ee,initialValues:J,render:function(t){var a,r,n=t.handleSubmit,o=t.submitting,i=t.pristine;return Object(M.jsxs)("form",{onSubmit:n,children:[Object(M.jsxs)(w.a,{container:!0,spacing:2,children:[Object(M.jsxs)(w.a,{item:!0,xs:12,justifyContent:"center",children:[Object(M.jsx)(S.a,{variant:"h4",gutterBottom:!0,sx:{textTransform:"uppercase"},children:e("book_a_table")}),Object(M.jsx)(T.a,{children:Object(M.jsx)("img",{src:"/book-a-table/apple-touch-icon.png"})})]}),Object(M.jsx)(w.a,{item:!0,xs:12,children:Object(M.jsx)(k.a,{name:"name",validate:Y,children:function(t){var a=t.input,r=t.meta;return Object(M.jsx)(z.a,Object(b.a)(Object(b.a)({},a),{},{label:r.touched&&r.error?e("error"):e("name"),error:r.touched&&!!r.error,helperText:r.touched&&r.error?r.error:e("name_hint")}))}})}),Object(M.jsxs)(R.b,{dateAdapter:B.a,children:[Object(M.jsx)(w.a,{item:!0,xs:12,children:Object(M.jsx)(k.a,{name:"date",validate:$,children:function(t){var a=t.input,r=t.meta;return Object(M.jsx)(P.a,Object(b.a)(Object(b.a)({},a),{},{label:r.touched&&r.error?e("error"):e("date"),renderInput:function(t){return Object(M.jsx)(z.a,Object(b.a)(Object(b.a)({},t),{},{error:r.touched&&!!r.error,helperText:e("date_hint")}))}}))}})}),Object(M.jsx)(w.a,{item:!0,xs:12,children:Object(M.jsx)(k.a,{name:"time",validate:X,children:function(t){var a=t.input,r=t.meta;return Object(M.jsx)(W.a,Object(b.a)(Object(b.a)({},a),{},{ampm:!1,minutesStep:15,label:r.touched&&r.error?e("error"):e("time"),renderInput:function(t){return Object(M.jsx)(z.a,Object(b.a)(Object(b.a)({},t),{},{error:r.touched&&!!r.error,helperText:e("time_hint")}))}}))}})})]}),Object(M.jsx)(w.a,{item:!0,xs:12,children:Object(M.jsx)(k.a,{name:"people",validate:Z(Q,(a=1,r=12,function(t){return Number(t)<a||Number(t)>r?e("not_between",{min:1,max:12}):void 0})),children:function(t){var a=t.input,r=t.meta;return Object(M.jsx)(z.a,Object(b.a)(Object(b.a)({},a),{},{label:r.touched&&r.error?e("error"):e("people_hint"),error:r.touched&&!!r.error,helperText:r.touched&&r.error?r.error:null}))}})}),Object(M.jsx)(w.a,{item:!0,xs:12,children:Object(M.jsx)(k.a,{name:"area",type:"radio",children:function(t){var a=t.input;return Object(M.jsxs)(E.a,{component:"fieldset",children:[Object(M.jsx)(C.a,{component:"legend",children:e("place")}),Object(M.jsxs)(D.a,Object(b.a)(Object(b.a)({},a),{},{defaultValue:J.area,children:[Object(M.jsx)(A.a,{value:"anywhere",control:Object(M.jsx)(I.a,{}),label:e("place_anywhere")}),Object(M.jsx)(A.a,{value:"upstairs",control:Object(M.jsx)(I.a,{}),label:e("place_upstairs")}),Object(M.jsx)(A.a,{value:"downstairs",control:Object(M.jsx)(I.a,{}),label:e("place_downstairs")})]}))]})}})}),Object(M.jsx)(w.a,{item:!0,xs:12,children:Object(M.jsx)(k.a,{name:"comment",children:function(t){var a=t.input;return Object(M.jsx)(z.a,Object(b.a)(Object(b.a)({},a),{},{label:e("other"),helperText:e("other_hint")}))}})}),Object(M.jsx)(w.a,{item:!0,xs:12,children:Object(M.jsx)(y.a,{type:"submit",variant:"contained",color:"primary",disabled:o||i,children:e("book")})})]}),Object(M.jsxs)(v.a,{sx:{marginTop:3},severity:"info",children:[e("beta_info"),Object(M.jsx)(N.a,{href:"mailto:theofficeszczecin@gmail.com?subject='Book a table - error'",children:e("beta_link")})]})]})}})},Y=a(109),Q=a(71),X=a(132),$={en:{translation:{add_new_booking:"Book another table",beta_info:"This is BETA version of our booking app. If you are experiencing any problems, please ",beta_link:"let us know",book:"Book",book_a_table:"Book a table",date:"Date",date_hint:"Not allowed to book earlier then tomorrow",error:"Error",generic_error:"Crap! Something get wrong :(",invalid_number:"Not a number",name:"First Name",name_hint:"First name or nickname",not_between:"Should be between {{min}} and {{max}}",other:"Other requirements",other_hint:"Let us know what else we can do for you",people_hint:"How many people?",place:"Place",place_anywhere:"Anywhere",place_upstairs:"Upstairs (street level)",place_downstairs:"Downstairs (basement)",required:"Required",success_message:"Booking successful. We cannot wait to see you.",time:"Time",time_hint:"In the range from 16:00 till 20:00",too_many_bookings:"Too many bookings for chosen day :(",try_again:"Try again"}},pl:{translation:{add_new_booking:"Zarezerwuj kolejny stolik",beta_info:"To jest wersja BETA systemu do rezerwacji miejsc. Je\u015bli napotykasz jakie\u015b problemy, ",beta_link:"zg\u0142o\u015b je nam",book:"Zarezerwuj",book_a_table:"Zarezerwuj stolik",date:"Data",date_hint:"Mo\u017cemy zarezerwowa\u0107 najwcze\u015bniej na jutro",error:"B\u0142\u0105d",genering_error:"Motyla noga! Co\u015b posz\u0142o nie tak :(",invalid_number:"Nieprawid\u0142owy numer",name:"Imi\u0119",name_hint:"Imi\u0119 lub pseudonim",not_between:"Dopuszczamy od {{min}} do {{max}}",other:"Inne wymagania",other_hint:"Napisz co jeszcze mo\u017cemy dla ciebie zrobi\u0107",people_hint:"Dla ilu os\xf3b?",place:"Miejsce",place_anywhere:"Dowolne",place_upstairs:"U g\xf3ry (poziom ulicy)",place_downstairs:"Na dole (piwnica)",required:"Wymagane",success_message:"Stolik zarezerwowany. Do zobaczenia!",time:"Godzina",time_hint:"W zakresie od 16:00 do 20:00",too_many_bookings:"Brak odpowiedniej ilo\u015bci miejsc na wybrany dzie\u0144 :(",try_again:"Spr\xf3buj ponownie"}}};Y.a.use(X.a).use(Q.e).init({resources:$,fallbackLng:"en",keySeparator:!1,interpolation:{escapeValue:!1}});Y.a;var ee=Object(c.a)("div")((function(e){return{position:"absolute",flexGrow:1,padding:40,backgroundColor:e.theme.palette.grey[100],top:0,bottom:0,right:0,left:0}})),te=Object(c.a)("div")({margin:"auto",maxWidth:500}),ae=function(){return Object(M.jsx)(ee,{children:Object(M.jsx)(te,{children:Object(M.jsx)(s.a,{sx:{p:4},children:Object(M.jsx)(G,{})})})})},re=a(130),ne=a.n(re),oe=(a(171),a(175),Object({NODE_ENV:"production",PUBLIC_URL:"https://mstefaniak.github.io/book-a-table",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_PROJECT_ID),ie={apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"https://mstefaniak.github.io/book-a-table",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_API_KEY,authDomain:"".concat(oe,".firebaseapp.com"),databaseURL:"https://".concat(oe,".firebaseio.com"),projectId:oe,storageBucket:"".concat(oe,".appspot.com"),messagingSenderId:"173934858452",appId:"1:173934858452:web:50fdcc7645b3d229572b41"},ce=ne.a.initializeApp(ie);i.a.render(Object(M.jsx)(n.a.StrictMode,{children:Object(M.jsx)(F.Provider,{value:{firebase:ce},children:Object(M.jsx)(ae,{})})}),document.getElementById("root"))}},[[177,1,2]]]);
//# sourceMappingURL=main.2a3c0183.chunk.js.map